{"ast":null,"code":"var _jsxFileName = \"/home/phuong/Documents/FE-Practice/reactjs-cinema/src/pages/UpdatePage.js\";\nimport React from 'react';\nimport { Form, Button, Alert, Col, Row } from 'react-bootstrap';\n\nclass CreatePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movies: [],\n      movie: {\n        code: '',\n        name: '',\n        rating: '',\n        time: ''\n      },\n      method: '',\n      urlString: ''\n    };\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleMethod = this.handleMethod.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSelect(event) {\n    let movie = this.state.movies[event.target.value];\n    this.setState({\n      code: movie._id,\n      name: movie.name,\n      rating: movie.rating,\n      time: movie.time\n    }); //console.log(this.state)\n  }\n\n  handleChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n\n    if (name === 'name') {\n      this.setState({\n        name: value\n      });\n    } else if (name === 'rating') {\n      this.setState({\n        rating: value\n      });\n    } else if (name === 'time') {\n      this.setState({\n        time: value\n      });\n    } //console.log(this.state)\n\n  }\n\n  handleMethod(event) {\n    this.setState({\n      method: event.target.name === 'delete' ? 'DELETE' : 'POST',\n      urlString: event.target.name === 'delete' ? 'delete' : 'update'\n    });\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:5000/movie/all').then(async res => await res.json()).then(res => this.setState({\n      movies: res.data\n    }));\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let submit_url = `http://localhost:5000/movie/${this.state.urlString}/${this.state.code}`;\n    let data = {\n      name: this.state.name,\n      rating: this.state.rating,\n      time: this.state.time\n    };\n    let submit_opt = {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      method: this.state.method,\n      body: JSON.stringify(data)\n    }; //console.log(data);\n    //console.log(submit_url, submit_opt);\n\n    console.log('Before: ', this.state.movies);\n    fetch(submit_url, submit_opt).then(res => res.json()).then(res => {\n      console.log(res.data);\n      let movieDelete = res.data;\n\n      if (this.state.method === 'DELETE') {\n        let id = movieDelete._id;\n        let newMovies = this.state.map(item => {\n          if (item._id !== id) {\n            return item;\n          }\n        });\n        this.setState({\n          movies: newMovies\n        });\n      }\n    });\n    console.log('After:', this.state.movies);\n    /*\n    fetch(`http://localhost:5000/movie/update/${this.state.code}`, {\n        headers: {'Content-Type':'application/json'},\n        method: 'POST',\n        body: JSON.stringify(data)\n    })\n        .then(async res => await res.json())\n        .then(res => this.setState({data: res.data, show: !this.state.show}));\n    */\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Alert, {\n      variant: \"warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert.Link, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }\n    }, \"Update\"), \" or \", /*#__PURE__*/React.createElement(Alert.Link, {\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 60\n      }\n    }, \"Delete\"))), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"movieSelect\",\n      onChange: this.handleSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, \"Select movie\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 29\n      }\n    }, this.state.movies.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 41\n        }\n      }, item.name);\n    }))))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }\n    }, \"Code\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      value: this.state.code,\n      readOnly: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: 'name',\n      value: this.state.name,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, \"Rating\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"rating\",\n      value: this.state.rating,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 25\n      }\n    }, \"Time\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"time\",\n      value: this.state.time,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      column: true,\n      lg: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      variant: \"primary\",\n      type: \"submit\",\n      name: \"update\",\n      onClick: this.handleMethod,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 37\n      }\n    }, \"Update\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      variant: \"danger\",\n      type: \"submit\",\n      name: \"delete\",\n      onClick: this.handleMethod,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 37\n      }\n    }, \"Delete\")))))));\n  }\n\n}\n\nexport default CreatePage;","map":{"version":3,"sources":["/home/phuong/Documents/FE-Practice/reactjs-cinema/src/pages/UpdatePage.js"],"names":["React","Form","Button","Alert","Col","Row","CreatePage","Component","constructor","props","state","movies","movie","code","name","rating","time","method","urlString","handleSelect","bind","handleChange","handleMethod","handleSubmit","event","target","value","setState","_id","componentDidMount","fetch","then","res","json","data","preventDefault","submit_url","submit_opt","headers","body","JSON","stringify","console","log","movieDelete","id","newMovies","map","item","render","index"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Form, Button, Alert, Col, Row} from 'react-bootstrap';\n\nclass CreatePage extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            movies: [],\n            movie:{\n                code: '',\n                name: '',\n                rating: '',\n                time: ''\n            },\n            method: '',\n            urlString : ''\n        }\n        this.handleSelect = this.handleSelect.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleMethod = this.handleMethod.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleSelect(event){\n        let movie = this.state.movies[event.target.value];\n        this.setState({\n            code: movie._id,\n            name: movie.name,\n            rating: movie.rating,\n            time: movie.time\n        })\n        //console.log(this.state)\n    }\n\n    handleChange(event){\n        let name = event.target.name;\n        let value = event.target.value;\n        if (name ==='name'){\n            this.setState({name: value});\n        } else if (name === 'rating') {\n            this.setState({rating: value});\n        } else if (name === 'time') {\n            this.setState({time: value});\n        }         \n        //console.log(this.state)\n    }\n\n    handleMethod(event){\n        this.setState({\n            method : event.target.name === 'delete' ? 'DELETE': 'POST',\n            urlString : event.target.name === 'delete' ? 'delete': 'update'\n        });\n    }\n    \n    componentDidMount(){\n        fetch('http://localhost:5000/movie/all')\n            .then(async res => await res.json())\n            .then(res => this.setState({movies: res.data}));\n    }\n\n    handleSubmit(event){\n        event.preventDefault();\n        let submit_url = `http://localhost:5000/movie/${this.state.urlString}/${this.state.code}`;\n        \n        let data = {\n            name: this.state.name,\n            rating: this.state.rating,\n            time: this.state.time\n        }\n\n        let submit_opt = {\n            headers: {'Content-Type':'application/json'},\n            method: this.state.method,\n            body: JSON.stringify(data)\n        }\n\n        //console.log(data);\n        //console.log(submit_url, submit_opt);\n        console.log('Before: ', this.state.movies)\n        fetch(submit_url, submit_opt).then(res=>res.json()).then(res => {\n            console.log(res.data);\n            let movieDelete = res.data;\n            if (this.state.method === 'DELETE') {\n                let id = movieDelete._id;\n                let newMovies = this.state.map((item)=>{\n                    if (item._id !== id){\n                        return item\n                    }\n                })\n                this.setState({movies: newMovies})\n            }\n        })\n        console.log('After:' ,this.state.movies)\n        /*\n        fetch(`http://localhost:5000/movie/update/${this.state.code}`, {\n            headers: {'Content-Type':'application/json'},\n            method: 'POST',\n            body: JSON.stringify(data)\n        })\n            .then(async res => await res.json())\n            .then(res => this.setState({data: res.data, show: !this.state.show}));\n        */\n    }\n\n    render(){\n        return(\n            <Form onSubmit={this.handleSubmit.bind(this)}>\n                <Alert variant='warning'>\n                    <h2><Alert.Link>Update</Alert.Link> or <Alert.Link variant=\"danger\">Delete</Alert.Link></h2>\n                </Alert>\n                <Form.Group controlId='movieSelect' onChange={this.handleSelect}>\n                    <Form.Row>\n                        <Form.Label column lg={2}>Select movie</Form.Label>\n                        <Col>\n                            <Form.Control as='select'>\n                                {this.state.movies.map((item, index)=>{\n                                    return(\n                                        <option value={index}>{item.name}</option>\n                                    )\n                                })}\n                            </Form.Control>\n                        </Col>\n                    </Form.Row>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Row>\n                        <Form.Label column lg={2}>Code</Form.Label>\n                        <Col>\n                            <Form.Control type='text' value={this.state.code} readOnly/>\n                        </Col>\n                    </Form.Row>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Row>\n                        <Form.Label column lg={2}>Name</Form.Label>\n                        <Col>\n                            <Form.Control type='text' name={'name'} value={this.state.name} onChange={this.handleChange}/>\n                        </Col>\n                    </Form.Row>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Row>\n                        <Form.Label column lg={2}>Rating</Form.Label>\n                        <Col>\n                            <Form.Control type='text' name='rating' value={this.state.rating} onChange={this.handleChange}/>\n                        </Col>\n                    </Form.Row>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Row>\n                        <Form.Label column lg={2}>Time</Form.Label>\n                        <Col>\n                            <Form.Control type='text' name='time' value={this.state.time} onChange={this.handleChange}/>\n                        </Col>\n                    </Form.Row>\n                </Form.Group>\n                <Form.Group>\n                    <Form.Row>\n                        <Form.Label column lg={2}></Form.Label>\n                        <Col>\n                            <Row>\n                                <Col>\n                                    <Button block variant='primary' type='submit' name='update' onClick={this.handleMethod}>Update</Button>\n                                </Col>\n                                <Col>\n                                    <Button block variant='danger' type='submit' name='delete' onClick={this.handleMethod}>Delete</Button>\n                                </Col>\n                            </Row>\n                        </Col>\n                    </Form.Row>\n                </Form.Group>\n            </Form>\n        )\n    }\n}\n\nexport default CreatePage;"]},"metadata":{},"sourceType":"module"}